<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Urban Hoodie Shop</title>

<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

<style>
body{
font-family: 'Segoe UI';
margin:0;
background:linear-gradient(135deg,#ece9e6,#ffffff);
transition:0.3s;
}

.dark{
background:#121212;
color:white;
}

header{
background:#000;
color:white;
padding:15px;
display:flex;
justify-content:space-between;
align-items:center;
}

header input, select{
padding:5px;
border-radius:5px;
border:none;
}

#productos{
display:flex;
flex-wrap:wrap;
justify-content:center;
gap:20px;
padding:20px;
}

.card{
background:white;
padding:15px;
border-radius:12px;
width:220px;
box-shadow:0 4px 15px rgba(0,0,0,0.2);
transition:0.3s;
}

.dark .card{
background:#1e1e1e;
}

.card:hover{
transform:scale(1.05);
}

button{
padding:8px;
border:none;
border-radius:6px;
margin:5px;
cursor:pointer;
}

.agregar{background:#007bff;color:white;}
.ver{background:#ff9800;color:white;}
.pagar{background:green;color:white;font-size:18px;padding:12px;}

.modal{
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.7);
justify-content:center;
align-items:center;
}

.modal-content{
background:white;
padding:20px;
border-radius:12px;
position:relative;
width:400px;
}

.cerrar{
position:absolute;
top:10px;
right:15px;
font-size:22px;
cursor:pointer;
}
</style>
</head>

<body>

<header>
<h2>Urban Hoodie</h2>
<input type="text" id="buscador" placeholder="Buscar prenda...">
<select id="filtro">
<option value="todos">Todos</option>
<option value="hoodies">Hoodies</option>
<option value="playeras">Playeras</option>
<option value="pants">Pantalones</option>
</select>
<button onclick="toggleModo()">ðŸŒ™</button>
</header>

<section id="productos"></section>

<h3 style="text-align:center;">ðŸ›’ Carrito</h3>
<ul id="carrito"></ul>

<div style="text-align:center;">
<p>Subtotal: $<span id="subtotal">0</span></p>
<p>IVA: $<span id="iva">0</span></p>
<p>Total: $<span id="total">0</span></p>
<button class="pagar" onclick="pagar()">PAGAR COMPRA</button>
</div>

<!-- MODAL 3D -->
<div id="modal3d" class="modal">
<div class="modal-content">
<span class="cerrar" onclick="cerrarModal()">âœ–</span>

<model-viewer
src="https://modelviewer.dev/shared-assets/models/ShopifyModels/Hoodie.glb"
auto-rotate
camera-controls
style="width:100%;height:400px;">
</model-viewer>

</div>
</div>

<script>

const productos=[
{nombre:"Hoodie Black",precio:900,categoria:"hoodies"},
{nombre:"Playera Oversize",precio:450,categoria:"playeras"},
{nombre:"Cargo Pants",precio:700,categoria:"pants"}
];

let carrito=[];

function render(){
let cont=document.getElementById("productos");
let busqueda=document.getElementById("buscador").value.toLowerCase();
let filtro=document.getElementById("filtro").value;

cont.innerHTML="";

productos.filter(p=>{
return (filtro=="todos"||p.categoria==filtro)
&& p.nombre.toLowerCase().includes(busqueda);
})
.forEach(p=>{
cont.innerHTML+=`
<div class="card">
<h3>${p.nombre}</h3>
<p>$${p.precio}</p>
<button class="agregar" onclick='agregar(${JSON.stringify(p)})'>Agregar</button>
${p.categoria=="hoodies" ? `<button class="ver" onclick="ver3D()">Ver en 3D</button>` : ``}
</div>
`;
});
}

render();

document.getElementById("buscador").addEventListener("input",render);
document.getElementById("filtro").addEventListener("change",render);

function agregar(prod){
carrito.push(prod);
mostrarCarrito();
}

function mostrarCarrito(){
let lista=document.getElementById("carrito");
lista.innerHTML="";
let subtotal=0;

carrito.forEach(p=>{
lista.innerHTML+=`<li>${p.nombre} - $${p.precio}</li>`;
subtotal+=p.precio;
});

let iva=subtotal*0.16;
let total=subtotal+iva;

document.getElementById("subtotal").innerText=subtotal.toFixed(2);
document.getElementById("iva").innerText=iva.toFixed(2);
document.getElementById("total").innerText=total.toFixed(2);
}

function pagar(){
if(carrito.length==0){
alert("Tu carrito estÃ¡ vacÃ­o");
return;
}
alert("Compra realizada âœ…");
carrito=[];
mostrarCarrito();
}

function toggleModo(){
document.body.classList.toggle("dark");
}

function ver3D(){
document.getElementById("modal3d").style.display="flex";
}

function cerrarModal(){
document.getElementById("modal3d").style.display="none";
}

window.onclick=function(e){
if(e.target==document.getElementById("modal3d")){
cerrarModal();
}
}
</script>

</body>
</html>
