<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UrbanWear Store</title>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
(function(){
emailjs.init("TU_PUBLIC_KEY");
})();
</script>

<style>
body{
    font-family: Arial, sans-serif;
    margin:0;
    background:#0f172a;
    color:white;
    transition:0.4s;
}

.light{
    background:#f1f5f9;
    color:#0f172a;
}

header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:20px;
    background:#1e293b;
}

.controls{
    display:flex;
    gap:10px;
}

input, select{
    padding:8px;
    border-radius:5px;
    border:none;
}

button{
    padding:8px 12px;
    border:none;
    border-radius:5px;
    cursor:pointer;
    background:#3b82f6;
    color:white;
}

.productos{
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:20px;
    padding:20px;
}

.card{
    width:200px;
    background:#1e293b;
    padding:15px;
    border-radius:10px;
    text-align:center;
    transition:0.3s;
}

.light .card{
    background:white;
}

.card:hover{
    transform:scale(1.05);
}

.precio{
    color:#22c55e;
    font-weight:bold;
}

.carrito{
    margin:20px;
    padding:20px;
    background:#020617;
    border-radius:10px;
}

.light .carrito{
    background:#e2e8f0;
}

.resumen{
    background:#020617;
    padding:20px;
    margin-top:20px;
    border-radius:10px;
    text-align:center;
}

.light .resumen{
    background:#e2e8f0;
}

.pagar{
    margin-top:15px;
    width:100%;
    background:#a3e635;
    color:black;
    font-weight:bold;
    padding:12px;
    font-size:16px;
}
</style>
</head>

<body>

<header>
    <h1>UrbanWear üõçÔ∏è</h1>
    <div class="controls">
        <input type="text" id="buscador" placeholder="Buscar ropa...">
        <select id="filtro">
            <option value="todos">Todas</option>
            <option value="sudaderas">Sudaderas</option>
            <option value="pantalones">Pantalones</option>
            <option value="playeras">Playeras</option>
            <option value="accesorios">Accesorios</option>
        </select>
        <button onclick="toggleModo()">Modo üåó</button>
    </div>
</header>

<section class="productos" id="productos"></section>

<section class="carrito">
    <h2>Tu Carrito üõí</h2>
    <ul id="listaCarrito"></ul>

    <div class="resumen">
        <p>Subtotal: $<span id="subtotal">0</span></p>
        <p>IVA (16%): $<span id="iva">0</span></p>
        <h3>Total: $<span id="totalFinal">0</span></h3>

        <button class="pagar" onclick="finalizarCompra()">PAGAR COMPRA</button>
    </div>
</section>

<script>

const productos = [
{nombre:"Sudadera Oversize", precio:50, categoria:"sudaderas"},
{nombre:"Sudadera Street", precio:65, categoria:"sudaderas"},
{nombre:"Jeans Skinny", precio:70, categoria:"pantalones"},
{nombre:"Cargo Pants", precio:80, categoria:"pantalones"},
{nombre:"Playera B√°sica", precio:30, categoria:"playeras"},
{nombre:"Playera Vintage", precio:45, categoria:"playeras"},
{nombre:"Gorra Snapback", precio:25, categoria:"accesorios"},
{nombre:"Mochila Urbana", precio:55, categoria:"accesorios"}
];

let carrito = [];

function renderizar(lista){
    const cont = document.getElementById("productos");
    cont.innerHTML = "";

    lista.forEach((prod,index)=>{
        cont.innerHTML += `
        <div class="card">
            <h3>${prod.nombre}</h3>
            <p class="precio">$${prod.precio}</p>
            <button onclick="agregar(${index})">Agregar</button>
        </div>`;
    });
}

function agregar(index){
    carrito.push(productos[index]);
    actualizarCarrito();
}

function actualizarCarrito(){
    const lista = document.getElementById("listaCarrito");
    const subtotalSpan = document.getElementById("subtotal");
    const ivaSpan = document.getElementById("iva");
    const totalFinalSpan = document.getElementById("totalFinal");

    lista.innerHTML = "";

    let subtotal = 0;

    carrito.forEach(item=>{
        lista.innerHTML += `<li>${item.nombre} - $${item.precio}</li>`;
        subtotal += item.precio;
    });

    let iva = subtotal * 0.16;
    let total = subtotal + iva;

    subtotalSpan.textContent = subtotal.toFixed(2);
    ivaSpan.textContent = iva.toFixed(2);
    totalFinalSpan.textContent = total.toFixed(2);
}

document.getElementById("buscador").addEventListener("input", filtrar);
document.getElementById("filtro").addEventListener("change", filtrar);

function filtrar(){
    const texto = buscador.value.toLowerCase();
    const categoria = filtro.value;

    let filtrados = productos.filter(p =>
        p.nombre.toLowerCase().includes(texto)
    );

    if(categoria !== "todos"){
        filtrados = filtrados.filter(p => p.categoria === categoria);
    }

    renderizar(filtrados);
}

function toggleModo(){
    document.body.classList.toggle("light");
}

function finalizarCompra(){

    if(carrito.length === 0){
        alert("Tu carrito est√° vac√≠o");
        return;
    }

    let listaProductos = carrito.map(p => p.nombre + " - $" + p.precio).join("\n");

    let subtotal = carrito.reduce((acc,p)=> acc+p.precio,0);
    let iva = subtotal * 0.16;
    let total = subtotal + iva;

    emailjs.send("TU_SERVICE_ID","TU_TEMPLATE_ID",{
        productos: listaProductos,
        total: total.toFixed(2)
    })
    .then(function(response){
        alert("Compra realizada ‚úÖ Revisa tu correo");
        carrito = [];
        actualizarCarrito();
    }, function(error){
        alert("Error al enviar correo ‚ùå");
    });
}

renderizar(productos);

</script>

</body>
</html>
