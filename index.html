<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UrbanWear Store</title>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
(function(){
emailjs.init("TU_PUBLIC_KEY");
})();
</script>

<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

<style>
body{
    font-family: Arial, sans-serif;
    margin:0;
    background:#0f172a;
    color:white;
}

header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:20px;
    background:#1e293b;
}

.boton3d{
    background:#9333ea;
    padding:10px 20px;
    border:none;
    border-radius:8px;
    color:white;
    cursor:pointer;
}

.productos{
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:20px;
    padding:20px;
}

.card{
    width:200px;
    background:#1e293b;
    padding:15px;
    border-radius:10px;
    text-align:center;
}

.precio{
    color:#22c55e;
}

.carrito{
    margin:20px;
    padding:20px;
    background:#020617;
    border-radius:10px;
}

.resumen{
    background:#020617;
    padding:20px;
    margin-top:20px;
    border-radius:10px;
    text-align:center;
}

.pagar{
    margin-top:15px;
    width:100%;
    background:#a3e635;
    color:black;
    font-weight:bold;
    padding:12px;
}

/* MODAL 3D */

.modal{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.8);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:999;
}

.modal-content{
    width:80%;
    height:80%;
    background:#111;
    border-radius:10px;
    padding:20px;
    position:relative;
    z-index:1;
}

.cerrar{
    position:absolute;
    top:10px;
    right:20px;
    cursor:pointer;
    font-size:22px;
    background:red;
    padding:5px 10px;
    border-radius:5px;
    z-index:999;
}
</style>
</head>

<body>

<header>
<h1>UrbanWear üõçÔ∏è</h1>
<button class="boton3d" onclick="abrir3D()">üëï Ver prenda 3D</button>
</header>

<section class="productos" id="productos"></section>

<section class="carrito">
<h2>Tu Carrito üõí</h2>
<ul id="listaCarrito"></ul>

<div class="resumen">
<p>Subtotal: $<span id="subtotal">0</span></p>
<p>IVA (16%): $<span id="iva">0</span></p>
<h3>Total: $<span id="totalFinal">0</span></h3>
<button class="pagar" onclick="finalizarCompra()">PAGAR COMPRA</button>
</div>
</section>

<!-- MODAL 3D -->
<div class="modal" id="visor3d" onclick="cerrar3D()">

<div class="modal-content" onclick="event.stopPropagation()">

<span class="cerrar" onclick="cerrar3D()">X</span>

<model-viewer
src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
alt="Prenda 3D"
auto-rotate
camera-controls
style="width:100%; height:100%;">
</model-viewer>

</div>
</div>

<script>

const productos = [
{nombre:"Sudadera Oversize", precio:50},
{nombre:"Jeans Skinny", precio:70},
{nombre:"Playera Vintage", precio:45},
{nombre:"Gorra Snapback", precio:25}
];

let carrito = [];

function renderizar(){
const cont = document.getElementById("productos");
cont.innerHTML = "";
productos.forEach((p,i)=>{
cont.innerHTML += `
<div class="card">
<h3>${p.nombre}</h3>
<p class="precio">$${p.precio}</p>
<button onclick="agregar(${i})">Agregar</button>
</div>`;
});
}

function agregar(i){
carrito.push(productos[i]);
actualizarCarrito();
}

function actualizarCarrito(){
const lista = document.getElementById("listaCarrito");
lista.innerHTML = "";
let subtotal = 0;

carrito.forEach(item=>{
lista.innerHTML += `<li>${item.nombre} - $${item.precio}</li>`;
subtotal += item.precio;
});

let iva = subtotal * 0.16;
let total = subtotal + iva;

document.getElementById("subtotal").textContent = subtotal.toFixed(2);
document.getElementById("iva").textContent = iva.toFixed(2);
document.getElementById("totalFinal").textContent = total.toFixed(2);
}

function finalizarCompra(){
if(carrito.length === 0){
alert("Tu carrito est√° vac√≠o");
return;
}

let listaProductos = carrito.map(p => p.nombre + " - $" + p.precio).join("\n");
let subtotal = carrito.reduce((acc,p)=> acc+p.precio,0);
let total = subtotal + (subtotal*0.16);

emailjs.send("TU_SERVICE_ID","TU_TEMPLATE_ID",{
productos: listaProductos,
total: total.toFixed(2)
})
.then(()=>{
alert("Compra realizada ‚úÖ Revisa tu correo");
carrito = [];
actualizarCarrito();
});
}

function abrir3D(){
document.getElementById("visor3d").style.display="flex";
}

function cerrar3D(){
document.getElementById("visor3d").style.display="none";
}

renderizar();

</script>

</body>
</html>


